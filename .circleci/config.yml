version: 2.0
jobs:
  build:
    working_directory: ~/vault-circleci-auth-plugin
    docker:
      - image: golang:1.9
    steps:
      - checkout
      - run:
          name: Build plugin
          command: |
            go get
            go build
            go test
# Commenting this out because it won't work on CircleCI,
# but it does work locally with Docker for Mac.
#      - run:
#          name: Integration Test
#          working_directory: ~/vault-circleci-auth-plugin/integration-test
#          command: |
#            apk add --update-cache bash
#            ./tests.sh

      